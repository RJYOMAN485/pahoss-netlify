(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{ec95:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("GoogleMap")],1)},s=[],a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"q-mt-lg"},[0==t.show?o("div",{staticClass:"row text-center justify-center"},[o("div",{staticClass:"col-6 col-xs-10 text-body2",staticStyle:{color:"#444"}},[t._v("\n      Select Location or\n      "),o("q-form",{on:{submit:t.navigate}},[o("q-input",{staticClass:"q-ml-md",staticStyle:{display:"inline-grid"},attrs:{type:"number",dense:"",label:"Enter PIN Code",rules:[function(t){return t&&6==t.length||"Postal code should be 6 digit"}]},model:{value:t.pin,callback:function(e){t.pin=e},expression:"pin"}}),o("q-btn",{staticClass:"q-ml-md",attrs:{outline:"",type:"submit",rounded:"",color:"secondary",label:"Search",loading:t.searchLoading}})],1)],1)]):t._e(),o("div",{staticClass:"row q-pa-md justify-center q-gutter-md"},[0==t.show?o("div",{staticClass:"col-md-12 col-sm-12 col-xs-12 col-lg-12"},[o("q-card-section",[o("div",{staticClass:"text-caption text-center"},[t._v("\n          Markers with\n          "),o("span",[o("q-icon",{attrs:{color:"red",size:"md",name:"room"}})],1),t._v(" are the\n          parking zones. Hover over to book (Refresh the page if no markers\n          showed)\n        ")])]),t.isMounted?o("gmap-map",{ref:"mapRef",staticClass:"col-6 col-xs-10",staticStyle:{width:"100%",height:"400px"},attrs:{center:t.center,zoom:9}},[t._l(t.markers,(function(e,i){return o("gmap-marker",{key:i,attrs:{position:e,content:"kl"},on:{click:function(o){return t.openInfoWindowTemplate(e)},mouseover:function(o){return t.openInfoWindowTemplate(e)}}})})),o("gmap-info-window",{attrs:{options:{maxWidth:300,pixelOffset:{width:0,height:-35}},position:t.infoWindow.position,opened:t.infoWindow.open},on:{closeclick:function(e){t.infoWindow.open=!1}}},[o("div",{staticClass:"text-center",staticStyle:{display:"grid"}},[o("small",{staticClass:"text-bold"},[t._v(t._s(t.address))]),o("small",[t._v(" ( "+t._s(t.available_time)+" )")]),o("q-btn",{attrs:{flat:"",dense:"",label:"Book",color:"red"},on:{click:function(e){return t.setLocation()}}})],1)])],2):t._e()],1):t._e(),1==t.show?o("div",{staticClass:"col-md-10 col-sm-8 col-xs-12 col-lg-8"},[o("q-card",[o("q-card-section",{staticClass:"bg-primary text-white"},[o("div",{staticClass:"text-h6"},[t._v("Step 1 of 2 Information")])]),o("q-form",{staticClass:"q-gutter-md q-pa-lg",on:{submit:function(e){return e.preventDefault(),t.getPayment(e)}}},[o("q-list",[o("q-item",[o("q-item-section",[o("q-icon",{attrs:{color:"primary",size:"lg",name:"directions_car"}}),o("span",{staticStyle:{color:"#444"}},[t._v(t._s(this.address))])],1),o("q-item-section",{staticStyle:{"align-items":"center"},attrs:{avatar:""}},[o("q-icon",{attrs:{color:"grey",size:"sm",name:"today"}}),o("span",{staticStyle:{color:"#444"}},[t._v(t._s(t.available_time))])],1)],1)],1),o("div",{staticClass:"row justify-between"},[o("div",{staticClass:"col-6"},[o("q-input",{attrs:{label:"Entry date",filled:""},scopedSlots:t._u([{key:"append",fn:function(){return[o("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[o("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[o("q-date",{attrs:{options:t.optionsFn,mask:"YYYY-MM-DD"},on:{click:t.optionsFnTime3},model:{value:t.entryDate,callback:function(e){t.entryDate=e},expression:"entryDate"}},[o("div",{staticClass:"row items-center justify-end"},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}],null,!1,4216729474),model:{value:t.entryDate,callback:function(e){t.entryDate=e},expression:"entryDate"}})],1),o("div",{staticClass:"col-5"},[o("q-input",{attrs:{label:"Entry time",filled:"",mask:"time",rules:["time"]},on:{click:t.optionsFnTime3},scopedSlots:t._u([{key:"append",fn:function(){return[o("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[o("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[o("q-time",{attrs:{"hour-options":t.hourOptionsTime1},on:{click:t.optionsFnTime3},model:{value:t.entryTime,callback:function(e){t.entryTime=e},expression:"entryTime"}},[o("div",{staticClass:"row items-center justify-end"},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}],null,!1,1368448461),model:{value:t.entryTime,callback:function(e){t.entryTime=e},expression:"entryTime"}})],1)]),o("div",{staticClass:"row justify-between"},[o("div",{staticClass:"col-6"},[o("q-input",{attrs:{readonly:"",label:"Exit date",filled:""},scopedSlots:t._u([{key:"append",fn:function(){return[o("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}})]},proxy:!0}],null,!1,3296233546),model:{value:t.exitDate,callback:function(e){t.exitDate=e},expression:"exitDate"}})],1),o("div",{staticClass:"col-5"},[o("q-input",{attrs:{readonly:"",label:"Exit time",filled:""},scopedSlots:t._u([{key:"append",fn:function(){return[o("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}})]},proxy:!0}],null,!1,3852852520),model:{value:t.exitTime,callback:function(e){t.exitTime=e},expression:"exitTime"}})],1)]),o("div",{staticClass:"row justify-between"},[o("div",{staticClass:"col-6"},[o("q-select",{attrs:{dense:"",options:t.options,label:"Period"},on:{input:t.optionsFnTime3},model:{value:t.period,callback:function(e){t.period=e},expression:"period"}})],1),o("div",{staticClass:"col-5 text-weight-bold text-green q-mt-md"},[t._v("\n              Total Amount: "+t._s(this.amount)+"\n            ")])]),o("q-btn",{attrs:{label:"Continue",type:"submit",color:"secondary"}})],1),o("q-separator")],1)],1):t._e(),o("div",{staticClass:"col-md-10 col-sm-8 col-xs-12 col-lg-8"},[2==t.show?o("q-card",[o("q-card-section",{staticClass:"bg-primary text-white"},[o("div",{staticClass:"text-h6"},[t._v("\n            Step 2 of 2 Payment"),o("br"),o("q-img",{attrs:{src:"http://www.prepbootstrap.com/Content/images/shared/misc/creditcardicons.png"}})],1)]),o("q-form",{staticClass:"q-gutter-md q-pa-lg",on:{submit:function(e){return e.preventDefault(),t.onBook(e)}}},[o("q-input",{attrs:{dense:"",color:"grey-3","label-color":"orange",outlined:"",label:"Card Number"},scopedSlots:t._u([{key:"append",fn:function(){return[o("q-icon",{attrs:{name:"credit_card",color:"grey"}})]},proxy:!0}],null,!1,2883012990),model:{value:t.cardNumber,callback:function(e){t.cardNumber=e},expression:"cardNumber"}}),o("div",{staticClass:"row justify-between"},[o("q-input",{staticClass:"col-2",attrs:{maxlength:"2",dense:"",label:"MM"},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}}),o("small",{staticClass:"col-1 text-h6 q-mt-sm"},[t._v("/")]),o("q-input",{staticClass:"col-2",attrs:{maxlength:"4",dense:"",label:"YY"},model:{value:t.year,callback:function(e){t.year=e},expression:"year"}}),o("q-input",{staticClass:"col-6",attrs:{dense:"",color:"grey-3","label-color":"orange",outlined:"",label:"CVC Code",maxlength:"3",type:"password"},scopedSlots:t._u([{key:"append",fn:function(){return[o("q-icon",{attrs:{name:"gpp_good",color:"grey"}})]},proxy:!0}],null,!1,3207544899),model:{value:t.cvc,callback:function(e){t.cvc=e},expression:"cvc"}})],1),o("q-input",{staticClass:"col-6",attrs:{dense:"",color:"grey-3","label-color":"orange",outlined:"",label:"Card Holder Name"},scopedSlots:t._u([{key:"append",fn:function(){return[o("q-icon",{attrs:{name:"person",color:"grey"}})]},proxy:!0}],null,!1,3526569581),model:{value:t.cardHolder,callback:function(e){t.cardHolder=e},expression:"cardHolder"}}),o("q-btn",{attrs:{label:"Book now",loading:t.loading,type:"submit",color:"secondary"}}),o("q-btn",{attrs:{label:"Back",flat:"",icon:"arrow_back",color:"primary"},on:{click:function(e){t.show=1}}})],1),o("q-separator")],1):t._e()],1),3==t.show?o("div",{staticClass:"col-md-10 col-sm-8 col-xs-12 col-lg-8"},[o("q-card",{attrs:{flat:"",bordered:""}},[o("q-card-section",{attrs:{horizontal:""}},[o("div",{staticClass:"gt-xs col-4  text-center text-caption q-mt-lg"},[o("img",{attrs:{width:"200px",src:"https://preview.colorlib.com/theme/bootstrap/contact-form-16/images/undraw-contact.svg"}})]),o("q-card-section",{staticClass:"col"},[o("div",{staticClass:"text-center text-h5 text-weight-thin"},[t._v("\n              Provide Feedback\n            ")]),o("q-form",{staticClass:"q-gutter-md q-pa-md",on:{click:function(t){t.stopPropagation()},submit:function(e){return e.preventDefault(),t.onFeedback()}}},[o("div",{staticClass:"row q-col-gutter-xs"},[o("div",{staticClass:"col-md-12 col-sm-12 col-xs-12 col-lg-12"},[o("q-input",{attrs:{rounded:"",type:"textarea",outlined:"",dense:"",color:"secondary",placeholder:"Write your message",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),o("div",{staticStyle:{display:"flex"}},[o("q-btn",{staticStyle:{color:"#26A69A"},attrs:{type:"submit",rounded:"",outline:"",label:"Submit",icon:"done"}}),o("q-btn",{staticClass:"q-ml-sm",staticStyle:{color:"#26A69A"},attrs:{rounded:"",outline:"",label:"Skip"},on:{click:function(e){return t.skip()}}})],1)],1)])])],1)],1)],1)],1):t._e()])])},n=[],l=(o("ddb0"),o("5319"),o("755e")),r=o("bd4c"),c={name:"GoogleMap",computed:{google:l["gmapApi"]},data(){return{center:{lat:39.933049,lng:32.858912},currentPlace:null,markers:[],places:[],infoWindow:{position:{lat:0,lng:0},open:!1,template:""},parking_zones:[],address:"",pin:null,entryDate:null,entryTime:"08:56",validateExit:"",exitDate:null,exitTime:null,timeWithSeconds:"10:56:00",current:1,show:0,cardNumber:"3062-4528-45-28",expiryDate:"",cvc:"888",cardHolder:"Dummy Holder",month:"05",year:"2023",hourOptionsTime1:[],available_time:"",marker:{position:{lat:10,lng:10}},center:{lat:10,lng:10},mapOptions:{disableDefaultUI:!0},formData:{location:"",lat:"null",lng:"null",postal:"888888",available_space:6,available_time:null},amount:null,message:"",parking_id:null,selectedLocation:"",period:"30 minutes",mail:{},isMounted:!1,loading:!1,searchLoading:!1,options:["30 minutes","1 Hour","2 Hours","5 Hours","1 day"]}},mounted(){console.log("mounted");let t=Date.now(),e=r["b"].formatDate(t,"YYYY-MM-DD");this.optionsFnTime3(),this.date=this.entryDate=this.exitDate=e,this.geolocate(),this.mail={email:"ujjali485@gmail.com",book_id:12}},methods:{setPlace(t){this.currentPlace=t},navigate(){this.searchLoading=!0;let t={postal:this.pin};this.$axios.post("postal",t).then((e=>{this.searchLoading=!1,console.log("postal",e.data),e.data.length<1?this.$q.notify({message:"Postal code with "+t.postal+"not found",color:"red-4",position:"top",icon:"warning"}):(this.markers=[],e.data.forEach((t=>{let e={lat:parseFloat(t.lat),lng:parseFloat(t.lng),label:t.pname,id:t.id};this.markers=[...this.markers,e]})))})).catch((t=>{this.searchLoading=!1,console.log("error",t.message),this.$q.notify({message:t.message,color:"red-4",position:"top",icon:"warning"})})),this.panToMarker()},sendMail(){this.$axios.post("postmail",this.mail).then((t=>{console.log(t.data),this.$q.notify({message:"Booking Success. Check your email for booking id",color:"green",position:"top",icon:"thumb_up"}),this.loading=!1})).catch((t=>{console.log("error",t.message),this.$q.notify({message:"Unable to send send booking id to email.Make sure your email is correct",color:"red-4",position:"top",icon:"warning"}),this.loading=!1}))},onFeedback(){let t={user_id:this.$store.state.store.userDetails.id,message:this.message};this.$axios.post("feedback",t).then((t=>{console.log(t.data),this.$router.replace("/mybookings")})).catch((t=>{console.log("error",t.message),this.$router.replace("/mybookings")}))},skip(){this.$router.replace("/mybookings")},setLocation(){this.show=1},closeWindow(){console.log("hello")},openInfoWindowTemplate(t){console.log("m window",t.available_time),"Morning"==t.available_time?(this.entryTime="09:00",this.exitTime="09:30",this.available_time="Morning",this.hourOptionsTime1=[9,10,11,12]):"Morning-Afternoon"==t.available_time?(this.entryTime="09:00",this.exitTime="09:30",this.hourOptionsTime1=[9,10,11,12,13,14,15,16,17,18],this.available_time="Morning-Afternoon",this.hourOptionsTime1=[9,10,11,12,13,14,15,16,17]):"Afternoon"==t.available_time?(this.entryTime="13:00",this.exitTime="13:30",this.available_time="Afternoon",this.hourOptionsTime1=[12,13,14,15,16,17]):(this.entryTime="18:00",this.exitTime="18:30",this.available_time="Night",this.hourOptionsTime1=[18,19,20,21,22,23,34]),this.parking_id=t.id,console.log("mouse over",this.parking_id),this.address=t.label,this.infoWindow.position={lat:t.lat,lng:t.lng},this.infoWindow.template="\n      <small>Avalable(2/5)</small> <br>\n      <button style='cursor:pointer;margin-top:10px;background:green;border:none;padding:3px;color:#ccc;text-decoration:none'>book</button>\n      ",this.infoWindow.open=!0},addMarker(){if(this.currentPlace){const t={lat:this.currentPlace.geometry.location.lat(),lng:this.currentPlace.geometry.location.lng()};this.markers=[{lat:21.1594627,lng:72.6822083,label:"Hahaha"},{lat:23.0204978,lng:72.4396548,label:"AhmeLOLLLdabad"},{lat:22.2736308,lng:70.7512555,label:"Rajkot"}],this.places.push(this.currentPlace),this.center=t,this.currentPlace=null}},closeInfo(){console.log("leave"),this.infoWindow.open=!1},geolocate:async function(){await this.$axios.get("parking-zones").then((t=>{this.parking_zones=t.data,console.log("parking-zones",t.data)})).catch((t=>{console.log("error",t.message)})),navigator.geolocation.getCurrentPosition((t=>{console.log("lat: "+t.coords.latitude),console.log("lng: "+t.coords.longitude),this.isMounted=!0,console.log("set mounted"),this.center={lat:t.coords.latitude,lng:t.coords.longitude},this.lat=t.coords.latitude,this.lng=t.coords.longitude,this.parking_zones.forEach((t=>{console.log("zone settt",t);let e={lat:parseFloat(t.lat),lng:parseFloat(t.lng),label:t.pname,id:t.id,available_time:t.available_time};this.markers=[...this.markers,e],console.log("allmarker",this.markers)}))}),(()=>{this.$q.notify({message:"Location access denied. Enable location to book",color:"red-4",position:"top",icon:"warning"})})),this.panToMarker()},onBook(){let t={user_id:this.$store.state.store.userDetails.id,parking_id:this.parking_id,entry_date:this.entryDate,entry_time:this.entryTime,exit_date:this.exitDate,exit_time:this.exitTime,amount:this.amount,email:this.$store.state.store.userDetails.email,status:"active"};this.loading=!0,this.$axios.post("storebooking",t).then((t=>{this.$q.notify({message:"Booking Success. Check your email for booking id",color:"green",position:"top",icon:"thumb_up"}),this.loading=!1,this.show=3})).catch((t=>{this.loading=!1,console.log("error",t.message),this.$q.notify({message:"Unable to send send booking id to email.Make sure your email is correct",color:"red-4",position:"top",icon:"warning"}),this.loading=!1,this.show=3}))},showCurrent(){this.show=!1},optionsFnTime3(t){this.exitDate=this.entryDate;var e=this.entryTime.indexOf(":"),o=(t=this.entryTime.substring(0,e),this.entryTime.substring(e+1,5));if("30 minutes"==this.period){this.amount=30;let e=Number(o)+30;if(console.log("plus",e),e>60){let o=e/60,i="",s=e%60;Number(s)<10&&(s="0"+s),i=Number(t)+Math.trunc(o)<10?"0"+(Number(t)+Math.trunc(o)):Number(t)+Math.trunc(o),this.exitTime=i+":"+s}else this.exitTime=t+":"+(Number(o)+30)}else if("1 Hour"==this.period){this.amount=60;let e=Number(t)+1;e<10&&(e="0"+e),this.exitTime=e+":"+o}else if("2 Hours"==this.period){this.amount=120;let e=Number(t)+2;e<10&&(e="0"+e),this.exitTime=e+":"+o}else if("5 Hours"==this.period){this.amount=300;let e=Number(t)+5;e<10&&(e="0"+e),this.exitTime=e+":"+o}else if("1 day"==this.period){this.amount=720,this.exitTime=this.entryTime;var i=this.entryDate.substring(this.exitDate.length-2,this.exitDate.length);i=Number(i)+1,i<10&&(i="0"+i);var s=this.entryDate.substring(0,4),a=this.entryDate.substring(5,7);this.exitDate=s+"-"+a+"-"+i}},getPayment(){let t=Date.now(),e=r["b"].formatDate(t,"YYYY-MM-DD");this.entryDate<e?this.$q.notify({message:"Entry time should not be less than current date",color:"red-4",position:"top",icon:"warning"}):this.show=2},optionsFn(t){return console.log("options fn",this.date),t>=this.date},onSubmit(){this.$axios.defaults.withCredentials=!0,this.$axios.post("http://pahoss.herokuapp.com/api/storeparking",this.formData).then((t=>{console.log(t.data)})).catch((t=>{console.log(t.message)})),this.current=1},getCityAndCountry(){this.formData.lat=this.marker.position.lat,this.formData.lng=this.marker.position.lng;let t=`http://geocode.xyz/${this.marker.position.lat},${this.marker.position.lng} ?json=1`;this.$axios.defaults.withCredentials=!1,this.$axios.get(t).then((t=>{this.formData.location=t.data.city+","+t.data.region})).catch((t=>{console.log(t)}))},handleMarkerDrag(t){this.marker.position={lat:t.latLng.lat(),lng:t.latLng.lng()}},panToMarker(){this.current||this.$refs.mapRef.panTo(this.marker.position)},handleMapClick(t){this.marker.position={lat:t.latLng.lat(),lng:t.latLng.lng()},this.getCityAndCountry()}}},d=c,m=o("2877"),p=o("0378"),u=o("27f9"),h=o("9c40"),g=o("a370"),b=o("0016"),f=o("f09f"),y=o("1c1c"),k=o("66e5"),x=o("4074"),v=o("7cbe"),w=o("52ee"),q=o("ca78"),_=o("ddd8"),C=o("eb85"),T=o("068f"),D=o("7f67"),M=o("eebe"),S=o.n(M),$=Object(m["a"])(d,a,n,!1,null,null,null),P=$.exports;S()($,"components",{QForm:p["a"],QInput:u["a"],QBtn:h["a"],QCardSection:g["a"],QIcon:b["a"],QCard:f["a"],QList:y["a"],QItem:k["a"],QItemSection:x["a"],QPopupProxy:v["a"],QDate:w["a"],QTime:q["a"],QSelect:_["a"],QSeparator:C["a"],QImg:T["a"]}),S()($,"directives",{ClosePopup:D["a"]});var N={name:"Dashboard",components:{GoogleMap:P}},L=N,F=Object(m["a"])(L,i,s,!1,null,null,null);e["default"]=F.exports}}]);